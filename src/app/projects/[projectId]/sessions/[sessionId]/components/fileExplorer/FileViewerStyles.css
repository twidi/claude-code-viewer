/**
 * CSS overrides to neutralize diff appearance for file viewing mode.
 *
 * When using @git-diff-view/react with a pseudo-diff (all lines as "added"),
 * these styles hide the diff-specific visual elements to make it look like
 * a normal file viewer.
 */
.file-viewer-mode {
  /* Allow table columns to size based on content instead of fixed widths */
  .unified-diff-table {
    table-layout: auto !important;
  }

  /* Hide the "+" operator in front of each line */
  .diff-line-content-operator {
    display: none !important;
  }

  /* Hide the empty column for old line numbers (since we only have new lines) */
  .diff-line-num span:first-child {
    display: none;
  }

  /* Use inline display to collapse the flex container around the single visible line number */
  .diff-line-num .flex {
    display: inline;
  }

  /* Also hide the spacer between old/new line numbers */
  .diff-line-num .flex > span:nth-child(2) {
    display: none;
  }

  /* Remove fixed width on the new line number span so it sizes to content */
  .diff-line-num .flex > span:nth-child(3) {
    width: unset !important;
  }

  /**
   * Make line number column width automatic based on content.
   * The library sets fixed width via inline styles, so we need !important.
   * The "+" button will be shown over the line number via its absolute positioning
   */
  .diff-line-num {
    width: max-content !important;
    min-width: unset !important;
    max-width: unset !important;
    padding-left: 0.5rem !important;
    padding-right: 0.5rem !important;
  }
}

/**
 * Override the "added" line backgrounds to use plain (neutral) colors.
 *
 * The library sets these CSS variables on selectors with high specificity:
 *   .diff-tailwindcss-wrapper[data-theme="light"] .diff-style-root
 *   .diff-tailwindcss-wrapper[data-theme="dark"] .diff-style-root
 *
 * We need to match or exceed that specificity. Using the same attribute
 * selector pattern ensures our overrides take effect.
 */

/* Light theme: neutralize green backgrounds for added lines */
.file-viewer-mode .diff-tailwindcss-wrapper[data-theme="light"] .diff-style-root {
  --diff-add-content--: var(--diff-plain-content--);
  --diff-add-lineNumber--: var(--diff-plain-lineNumber--);
  --diff-add-content-highlight--: var(--diff-plain-content--);
}

/* Dark theme: neutralize green backgrounds for added lines */
.file-viewer-mode .diff-tailwindcss-wrapper[data-theme="dark"] .diff-style-root {
  --diff-add-content--: var(--diff-plain-content--);
  --diff-add-lineNumber--: var(--diff-plain-lineNumber--);
  --diff-add-content-highlight--: var(--diff-plain-content--);
}
